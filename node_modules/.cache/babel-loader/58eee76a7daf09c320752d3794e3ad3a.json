{"ast":null,"code":"import _slicedToArray from\"/Users/bellamironova/Documents/React_Apps/IndeginousPeoples/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useRef,useState}from'react';import L from'leaflet';import{MapContainer,GeoJSON,ScaleControl,ZoomControl}from\"react-leaflet\";import InfoBox from\"./InfoBox\";import\"leaflet/dist/leaflet.css\";import\"./PeoplesMap.css\";import\"proj4leaflet\";import\"proj4\";import*as myConstClass from\"./constants.js\";import world from\"../data/world.json\";import russia from\"../data/russia.json\";import lakes from\"../data/lakes.json\";import nations from\"../data/nations.json\";var PeoplesMap=function PeoplesMap(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),info=_useState2[0],SetInfo=_useState2[1];var selected=null;var HighlightFeature=function HighlightFeature(layer){layer.setStyle({weight:2,color:'white',dashArray:'',fillOpacity:1});if(!L.Browser.ie&&!L.Browser.opera&&!L.Browser.edge){layer.bringToFront();}};var geoJsonRef=useRef();var ResetHighlight=function ResetHighlight(layer){if(selected==null||selected._leaflet_id!==layer._leaflet_id){geoJsonRef.current.resetStyle(layer);}};var Select=function Select(layer){if(selected!==null){var previous=selected;};SetInfo(layer.feature.properties);info=layer.feature.properties;layer.setStyle({weight:3,color:\"white\",dashArray:' 3 5',fillOpacity:1});selected=layer;if(previous){ResetHighlight(previous);}};var onEachFeatureF=function onEachFeatureF(feature,layer){layer.on({click:function click(e){Select(e.target);// console.log(info);\n},mouseover:function mouseover(e){HighlightFeature(e.target);},mouseout:function mouseout(e){ResetHighlight(e.target);}});//layer.bindPopup(\"ID: \" + feature.properties.fid+ \"<br>Народ: \" + feature.properties.Nation + \"<br>Описание: \" + feature.properties.Nation);\nlayer.bindTooltip(feature.properties.Nation,{permanent:true,direction:'center',position:'auto'}).openTooltip();};var crs=new L.Proj.CRS(\"EPSG:3576\",\"+proj=laea +lat_0=90 +lon_0=90 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs\",{resolutions:[32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1,0.5]//origin: [ -180, -90 ]         \n});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(InfoBox,{info:info}),/*#__PURE__*/React.createElement(MapContainer,{style:{height:\"100vh\"},zoomControl:false,zoom:2,center:[65,130],minZoom:2,maxZoom:5,crs:crs,maxBounds:[[20,75],[870,2000]]},/*#__PURE__*/React.createElement(GeoJSON,{data:world,style:myConstClass.basemapStyle2}),/*#__PURE__*/React.createElement(GeoJSON,{data:russia,style:myConstClass.basemapStyle}),/*#__PURE__*/React.createElement(GeoJSON,{data:lakes,style:myConstClass.waterStyle}),/*#__PURE__*/React.createElement(GeoJSON,{data:nations,style:myConstClass.subteStyle,onEachFeature:onEachFeatureF,ref:geoJsonRef}),/*#__PURE__*/React.createElement(ScaleControl,{position:\"bottomleft\"}),/*#__PURE__*/React.createElement(ZoomControl,{position:\"bottomleft\"})));};export default PeoplesMap;","map":{"version":3,"sources":["/Users/bellamironova/Documents/React_Apps/IndeginousPeoples/src/components/PeoplesMap.jsx"],"names":["React","useRef","useState","L","MapContainer","GeoJSON","ScaleControl","ZoomControl","InfoBox","myConstClass","world","russia","lakes","nations","PeoplesMap","info","SetInfo","selected","HighlightFeature","layer","setStyle","weight","color","dashArray","fillOpacity","Browser","ie","opera","edge","bringToFront","geoJsonRef","ResetHighlight","_leaflet_id","current","resetStyle","Select","previous","feature","properties","onEachFeatureF","on","click","e","target","mouseover","mouseout","bindTooltip","Nation","permanent","direction","position","openTooltip","crs","Proj","CRS","resolutions","height","basemapStyle2","basemapStyle","waterStyle","subteStyle"],"mappings":"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","sourcesContent":["import React from 'react';\nimport  { useRef, useState } from 'react';\nimport L from 'leaflet';\nimport { MapContainer, GeoJSON, ScaleControl, ZoomControl } from \"react-leaflet\";\nimport InfoBox from \"./InfoBox\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"./PeoplesMap.css\"\nimport \"proj4leaflet\";\nimport \"proj4\";\nimport  * as myConstClass from  \"./constants.js\";\nimport world from \"../data/world.json\";\nimport russia from \"../data/russia.json\";\nimport lakes from \"../data/lakes.json\";\nimport nations from \"../data/nations.json\";\n\n\n\nconst PeoplesMap = () => {\n\nlet [info, SetInfo] = useState(null);\nlet selected = null;\n\n\nconst HighlightFeature = (layer) => {\n    layer.setStyle({\n        weight: 2,\n        color: 'white',\n        dashArray: '',\n        fillOpacity: 1\n    }\n    );\n\n    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {\n      layer.bringToFront();\n  }\n};\n\n\nconst geoJsonRef = useRef();\n\nconst ResetHighlight = (layer) => {\n  if(selected == null || selected._leaflet_id !== layer._leaflet_id) {\n    geoJsonRef.current.resetStyle(layer);\n  }\n};\n\n\nconst Select = (layer) => {\n  if (selected !== null) {\n    var previous = selected;\n  };\n\n  SetInfo(layer.feature.properties);\n  info = layer.feature.properties;\n\n  layer.setStyle({\n    weight: 3,\n    color: \"white\",\n    dashArray: ' 3 5',\n    fillOpacity: 1\n}\n);\n\n  selected = layer;\n  if (previous) {\n    ResetHighlight(previous);\n  }\n}\n  \nconst onEachFeatureF = (feature, layer) => {\n  layer.on({\n    click: function (e) {\n      Select(e.target); \n      // console.log(info);\n    },  \n    mouseover: function (e) {\n      HighlightFeature(e.target);\n    },\n    mouseout: function (e) {\n      ResetHighlight(e.target);\n    },\n      \n  });\n  //layer.bindPopup(\"ID: \" + feature.properties.fid+ \"<br>Народ: \" + feature.properties.Nation + \"<br>Описание: \" + feature.properties.Nation);\n  layer.bindTooltip(feature.properties.Nation, {permanent: true, direction: 'center', position:'auto'}).openTooltip();\n};\n\n\n\n  const crs = new L.Proj.CRS(\"EPSG:3576\",\"+proj=laea +lat_0=90 +lon_0=90 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs\",\n {resolutions: [ 32768, 16384, 8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 8, 4, 2, 1, 0.5]\n  //origin: [ -180, -90 ]         \n}\n);\n\n\n  return (\n    <>\n      <InfoBox info={info}/>\n      <MapContainer style={{ height: \"100vh\" }} zoomControl={false} zoom={2} center={[65, 130]} minZoom={2} maxZoom={5} crs={crs} maxBounds={[[20, 75], [870, 2000]] } >\n\n        <GeoJSON\n          data = {world}\n          style={myConstClass.basemapStyle2}\n        />\n\n        <GeoJSON\n          data = {russia}\n          style={myConstClass.basemapStyle}\n        />\n\n        <GeoJSON\n          data = {lakes}\n          style={ myConstClass.waterStyle}\n        />\n\n        <GeoJSON\n          data={nations}\n          style={myConstClass.subteStyle}\n          onEachFeature={onEachFeatureF}\n          ref={geoJsonRef}\n        />\n\n        <ScaleControl position=\"bottomleft\" />\n        <ZoomControl position=\"bottomleft\" />\n\n      </MapContainer>\n\n    </>\n  );\n};\n\nexport default PeoplesMap;\n"]},"metadata":{},"sourceType":"module"}